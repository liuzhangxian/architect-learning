## 3月25日
悄悄话@我的心上人：看到你幸福的样子，于是幸福着你的幸福

## 五种I/O
IO系统调用分两步：1. 数据从磁盘装载到内核内存空间 2. 数据从内核内存复制到用户内存

参考文档：https://blog.51cto.com/litaotao/1289790

#### 阻塞IO
第一步：进程直接调用内核，然后休眠等待内核处理完成，内核完成数据准备，唤醒进程。（阻塞）
第二步：进程读取数据，数据从内核内存复制到用户内存。（阻塞）

#### 非阻塞IO
第一步：进程直接调用内核，内核马上返回（收到请求）同时准备数据，进程收到返回后定时询问内核数据准备好了吗。（非阻塞）
第二步：进程询问到数据准备好了，读取数据。（阻塞）

#### IO复用
第一步：进程发起select/epoll系统调用，然后进程阻塞，select/epoll负责内核调用，select/epoll返回进程数据准备完成。（阻塞）
第二步：进程读取数据。（阻塞）

#### 事件驱动IO
第一步：进程发起IO系统调用事件，然后继续做其他事，内核调用结束，内核通知进程数据准备好了。（非阻塞）
第二步：进程读取数据。（阻塞）

#### 异步IO
第一步：进程发起IO系统调用（aio_read函数），然后继续做其他事。（非阻塞）
第二步：内核把数据直接复制到进程内存空间，通知进程，进程直接得到返回的数据。（非阻塞）

## web的三种工作模式

#### Prefork工作原理
#### Worker工作原理
#### Event工作原理

## IO复用之select
1. select是系统调用函数，用户进程调用该函数指示内核等待传入的句柄中任何一个或多个可使用或经历指定时间后唤醒用户进程。
2. fd_set: 需要操作的IO句柄集合。select调用时，用户进程传递拷贝给select进程（拷贝开销大）。

参考文档：https://www.jb51.net/article/101057.htm

## IO复用之epoll

## select和epoll的区别
1. 同步IO：首先他们都是同步IO，都是在IO就绪时，用户进程自己读取数据。
2. 每次select调用，都要把fd_set从用户态拷贝到内核态。