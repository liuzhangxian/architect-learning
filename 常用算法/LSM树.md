#### 2020年4月20日 晚
“你知道我最喜欢吃什么水果吗?”　　“你这个开心果”


#### LSM(Log-Structure Merge Tree)结构化合并树
写数据基本思想：每次新数据插入，直接放到内存中，等收集到一定的数据后，作为一个文件一次性批量追加的方式写入磁盘。
读数据基本思路：每次读数据，先读取内存中的数据集，再到磁盘找最新的数据文件，直达最旧的一个数据集。
读优化：每个数据集内部，有序排列，二分查找。通过布隆过滤器来快速判定，元素是否在数据集中。定时merge数据集为一个大树，减少数据集文件个数。将数据集按照LRU缓存在内存中，减少访问数据集的次数。

#### LSM应用
HBase：基于LSM树实现的hbase写性能比mysql高了一个数量级，读性能却低了一个数量级
kudu: 一个key只能出现在一个rowSet中，并记录一个rowset的max、min值。每次新数据插入，往内存中的DeltaStore插入，后台定时merge DeltaStore到rowset中。


